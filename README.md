file poorly documented and messy, wil get around to this
